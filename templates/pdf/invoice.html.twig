{% extends 'pdf/layout.html.twig' %}
{% set amount = 0 %}
{% block details %}
    <h1>{{ invoice.company.name }}</h1>
    <p>
        {{ invoice.company.address }}<br/>
        {{ invoice.company.zipCode }} {{ invoice.company.city }}<br/>
        Tél. : 06 50 18 28 81<br/>
        Email : dulacbaptiste@gmail.com<br/>
    </p>
    <p>
        Auto-Entrepreneur<br/>
        SIRET : {{ invoice.company.registrationNumber }}
    </p>
{% endblock %}

{% block body %}
    <h1>Facture n°{{ invoice.code }}<small>{{ invoice.createdAt|date('d/m/Y') }}</small></h1>
    <strong>Code projet : {{ invoice.project.code }}</strong>{% if invoice.quote %} - Code Devis : {{ invoice.quote.code }}{% endif %}
    <div class="divider"></div>

    <table class="celled">
        <tr>
            <th width="55%">Désignation</th><th width="15%">Prix unitaire</th><th width="15%">Quantité</th><th width="15%">Total</th>
        </tr>
        {% for item in invoice.items %}
            {% set amount = amount + item.total %}
            <tr>
                <td>{{ item.details|nl2br }}</td>
                <td class="right">{{ item.amount|price }}</td>
                <td class="right">{{ item.quantity }}</td>
                <td class="right">{{ item.amount|price }}</td>
            </tr>
        {% endfor %}
        {% for discount in invoice.discounts %}
            {% set amount = amount - discount.total %}
            <tr>
                <td>{{ discount.details|nl2br }}</td>
                <td class="right">- {{ discount.amount|price }}</td>
                <td class="right">{{ discount.quantity }}</td>
                <td class="right">- {{ discount.amount|price }}</td>
            </tr>
        {% endfor %}
        <tr>
            <td colspan="3" class="right"><strong>TOTAL</strong></td>
            <td class="right"><strong>{{ amount|price }}</strong></td>
        </tr>
    </table>
{% endblock %}